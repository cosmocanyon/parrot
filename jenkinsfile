pipeline {
    agent any

    stages {
        stage('Check') {
            steps {
                echo 'Any checking...'
            }
        }
        stage('Build') {
            agent {
                node {
                label 'Master'
                }
	        }

            steps {
                echo 'building...'
                sh '''
                    g++ -c main.cpp
                    g++ -o main.sh main.o
                '''
            }
        }
        stage('Test') {
            agent {
                node {
                label 'Master'
                }
	        }

            steps {
                echo 'testing...'
                sh './main.sh Ciao a tutti'
            }
        }
        stage('Release') {
            steps {
                echo 'Releasing...'
            }
        }
    }
}
